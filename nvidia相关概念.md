# Qï¼šnvidiaç›¸å…³æ¦‚å¿µå¤ªå¤šäº†ï¼Œä½ èƒ½å¸®æˆ‘è§£é‡Šä¸€ä¸‹NVIDIA X serverã€cudaã€cuda toolkitã€nvidia container runtimeè¿™äº›æ¦‚å¿µï¼Œä»¥åŠè¯´æ˜ä¸€ä¸‹è¿™äº›æ¦‚å¿µçš„åŒºåˆ«å—
å½“ç„¶å¯ä»¥ï¼NVIDIA çš„ç›¸å…³æ¦‚å¿µç¡®å®éå¸¸å¤šï¼Œä¸‹é¢æˆ‘ä¼šä»åŠŸèƒ½ã€ç”¨é€”å’Œç›¸äº’å…³ç³»ä¸‰ä¸ªæ–¹é¢ï¼Œç³»ç»Ÿåœ°è§£é‡Šä½ æåˆ°çš„è¿™äº›å…³é”®æœ¯è¯­ï¼š

---

## ğŸ”§ 1. **NVIDIA X Server Settings**

- **æ˜¯ä»€ä¹ˆï¼š**
    
    - è¿™æ˜¯ä¸€ä¸ª **å›¾å½¢åŒ–é…ç½®ç•Œé¢**ï¼ˆGUIï¼‰ï¼Œç”¨äºç®¡ç† **NVIDIA æ˜¾å¡åœ¨ X Windowï¼ˆå›¾å½¢ç•Œé¢ï¼‰ä¸‹çš„è®¾ç½®**ã€‚
        
- **ç”¨é€”ï¼š**
    
    - è®¾ç½®æ˜¾ç¤ºå™¨åˆ†è¾¨ç‡ã€å¤šå±é…ç½®ã€æ˜¾å¡é£æ‰‡ã€åŠŸè€—ç®¡ç†ã€OpenGL è®¾ç½®ç­‰ã€‚
        
- **é¢å‘å¯¹è±¡ï¼š**
    
    - ç»™ä½¿ç”¨ **æ¡Œé¢ Linuxï¼ˆGNOME/KDE/Xfce ç­‰ï¼‰** çš„ç”¨æˆ·ä½¿ç”¨ï¼Œä¸æ˜¯å‘½ä»¤è¡Œå·¥å…·ã€‚
        
- **æ˜¯å¦å¿…é¡»ï¼š**
    
    - ä¸æ˜¯å¿…é¡»çš„ï¼Œåªç”¨äºå›¾å½¢é…ç½®ã€‚
        

---

## âš™ï¸ 2. **CUDAï¼ˆCompute Unified Device Architectureï¼‰**

- **æ˜¯ä»€ä¹ˆï¼š**
    
    - CUDA æ˜¯ **NVIDIA æä¾›çš„å¹¶è¡Œè®¡ç®—å¹³å°å’Œç¼–ç¨‹æ¨¡å‹**ï¼Œå…è®¸ä½ ç”¨ **C/C++/Fortran/Python ç­‰è¯­è¨€ç¼–å†™ GPU ä»£ç **ã€‚
        
- **ç”¨é€”ï¼š**
    
    - å®ç°é«˜æ€§èƒ½è®¡ç®—ï¼ˆHPCï¼‰ã€æœºå™¨å­¦ä¹ ã€å›¾åƒå¤„ç†ç­‰ GPU åŠ é€Ÿä»»åŠ¡ã€‚
        
- **åŒ…æ‹¬ä»€ä¹ˆï¼š**
    
    - CUDA æ˜¯ä¸€ä¸ªæ¦‚å¿µ/å¹³å°ï¼Œå®é™…ç”¨çš„æ—¶å€™éœ€è¦å®‰è£…å…¶å·¥å…·é“¾ï¼š**CUDA Toolkit**ã€‚
        
- **æ˜¯å¦å¿…é¡»ï¼š**
    
    - å¯¹äºéœ€è¦ **ç”¨ GPU åŠ é€Ÿè®¡ç®—çš„ç¨‹åºï¼ˆå¦‚ PyTorchã€TensorFlowï¼‰** æ˜¯å¿…é¡»çš„ã€‚
        

---

## ğŸ“¦ 3. **CUDA Toolkitï¼ˆå·¥å…·åŒ…ï¼‰**

- **æ˜¯ä»€ä¹ˆï¼š**
    
    - æ˜¯ CUDA å¹³å°çš„å®é™…è½¯ä»¶åŒ…ï¼ŒåŒ…å«å¼€å‘ GPU ç¨‹åºæ‰€éœ€çš„ **ç¼–è¯‘å™¨ã€åº“ã€è°ƒè¯•å™¨ã€ç¤ºä¾‹ä»£ç ** ç­‰ã€‚
        
- **ç»„æˆå†…å®¹ï¼š**
    
    - `nvcc` ç¼–è¯‘å™¨ã€cuBLASï¼ˆçº¿æ€§ä»£æ•°ï¼‰ã€cuDNNï¼ˆæ·±åº¦å­¦ä¹ ï¼‰ã€NVIDIA é©±åŠ¨æ¥å£ï¼ˆlibcudaï¼‰ã€ç¤ºä¾‹ä»£ç ç­‰ã€‚
        
- **ç”¨é€”ï¼š**
    
    - ç¼–å†™ã€ç¼–è¯‘ã€è°ƒè¯• CUDA ç¨‹åºã€‚
        
- **æ˜¯å¦å¿…é¡»ï¼š**
    
    - æ˜¯çš„ï¼Œä»»ä½•ä½¿ç”¨ CUDA çš„å¼€å‘éƒ½éœ€è¦å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„ Toolkitã€‚
        
- **æ³¨æ„ï¼š**
    
    - Toolkit ç‰ˆæœ¬å¿…é¡» **å’Œæ˜¾å¡é©±åŠ¨ç‰ˆæœ¬å…¼å®¹**ã€‚
        

---

## ğŸ³ 4. **NVIDIA Container Runtime**

- **æ˜¯ä»€ä¹ˆï¼š**
    
    - æ˜¯ä¸€ä¸ª **Docker çš„è¿è¡Œæ—¶æ‰©å±•**ï¼Œç”¨äºè®© Docker å®¹å™¨ä¸­èƒ½å¤Ÿè®¿é—®ä¸»æœºçš„ **NVIDIA GPU**ã€‚
        
- **ç”¨é€”ï¼š**
    
    - å…è®¸ä½ åœ¨å®¹å™¨ä¸­è¿è¡Œä½¿ç”¨ GPU çš„ç¨‹åºï¼Œæ¯”å¦‚åœ¨å®¹å™¨ä¸­è¿è¡Œ PyTorchã€TensorFlowã€‚
        
- **èƒŒåå·¥ä½œæœºåˆ¶ï¼š**
    
    - åˆ©ç”¨ `libnvidia-container`ã€`nvidia-smi`ã€`nvidia-container-cli` å°† GPU é©±åŠ¨åŠåº“æŒ‚è½½åˆ°å®¹å™¨ã€‚
        
- **æ˜¯å¦å¿…é¡»ï¼š**
    
    - å¦‚æœä½ éœ€è¦åœ¨ Docker æˆ– Kubernetes ä¸­ç”¨ GPUï¼Œé‚£å®ƒæ˜¯å¿…é¡»çš„ã€‚
        

---

## ğŸ§  æ€»ç»“å¯¹æ¯”è¡¨æ ¼

|æ¦‚å¿µ|ç±»åˆ«|ç”¨é€”|æ˜¯å¦å‘½ä»¤è¡Œ|æ˜¯å¦å¿…é¡»|
|---|---|---|---|---|
|NVIDIA X Server Settings|å›¾å½¢ç•Œé¢å·¥å…·|é…ç½®æ˜¾å¡æ˜¾ç¤ºè®¾ç½®ï¼ˆåˆ†è¾¨ç‡ã€é£æ‰‡ç­‰ï¼‰|âŒ GUI å·¥å…·|âŒ ä»…æ¡Œé¢ç”¨æˆ·éœ€è¦|
|CUDA|æ¶æ„/å¹³å°|å¹¶è¡Œè®¡ç®—æ¡†æ¶ï¼Œç”¨äº GPU ç¼–ç¨‹|âœ… æ˜¯ç†å¿µ|âœ… å¯¹ GPU ç¼–ç¨‹æ¥è¯´æ˜¯æ ¸å¿ƒ|
|CUDA Toolkit|è½¯ä»¶å·¥å…·åŒ…|å®é™…åŒ…å« CUDA ç¼–è¯‘å™¨ã€åº“ã€å¤´æ–‡ä»¶ç­‰|âœ… æ˜¯å·¥å…·é“¾|âœ… CUDA ç¨‹åºå¿…é¡»å®‰è£…|
|NVIDIA Container Runtime|å®¹å™¨æ’ä»¶|æ”¯æŒ GPU ç¨‹åºåœ¨ Docker ä¸­è¿è¡Œ|âœ… CLI å·¥å…·|âœ… GPU å®¹å™¨éƒ¨ç½²å¿…é¡»|

---

## âœ… ä½¿ç”¨åœºæ™¯å»ºè®®ä¸¾ä¾‹

|ä½ çš„éœ€æ±‚|éœ€è¦çš„ç»„ä»¶|
|---|---|
|ç”¨ GUI è®¾ç½®æ˜¾å¡å‚æ•°ï¼ˆæ¯”å¦‚åŒå±ï¼‰|NVIDIA X Server Settings|
|å†™ CUDA C ç¨‹åºåŠ é€Ÿå¤§è§„æ¨¡çŸ©é˜µä¹˜æ³•|CUDA + CUDA Toolkit|
|åœ¨æœ¬åœ°æœºå™¨è¿è¡Œ PyTorch å¹¶ç”¨ GPU|CUDA + CUDA Toolkit + NVIDIA é©±åŠ¨|
|åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œ TensorFlow + GPU|NVIDIA é©±åŠ¨ + NVIDIA Container Runtime + CUDA|

---

å¦‚ä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­å¸®ä½ æ¢³ç†å…¶ä»–ç›¸å…³æ¦‚å¿µï¼Œæ¯”å¦‚ï¼š

- `nvidia-smi`ï¼ˆGPU ç›‘æ§å·¥å…·ï¼‰
    
- `cuDNN`ï¼ˆæ·±åº¦å­¦ä¹ ä¸“ç”¨åº“ï¼‰
    
- `libnvidia-container`ï¼ˆå®¹å™¨ç»„ä»¶æ ¸å¿ƒåº“ï¼‰
    
- `driver` ä¸ `toolkit` çš„ç‰ˆæœ¬å…³ç³»
    

æ˜¯å¦éœ€è¦ç»§ç»­ï¼Ÿ
# Qï¼šå¥½çš„ï¼Œè¯·å¸®æˆ‘ç»§ç»­æ¢³ç†å…¶ä»–ç›¸å…³æ¦‚å¿µ
å¥½çš„ï¼Œä¸‹é¢æˆ‘ä»¬ç»§ç»­æ¢³ç† NVIDIA ç”Ÿæ€ä¸­å¸¸è§ä½†å®¹æ˜“æ··æ·†çš„æ¦‚å¿µã€‚æˆ‘ä»¬é‡ç‚¹å…³æ³¨å·¥å…·ã€åº“ã€ç»„ä»¶ã€é©±åŠ¨ä¹‹é—´çš„å…³ç³»ï¼Œå¹¶ç”¨é€šä¿—çš„æ–¹å¼è§£é‡Šæ¸…æ¥šæ¯ä¸€ä¸ªéƒ¨åˆ†çš„**èŒè´£ã€ç”¨é€”å’Œä¾èµ–å…³ç³»**ã€‚

---

## ğŸ“Š 5. **`nvidia-smi`ï¼ˆNVIDIA System Management Interfaceï¼‰**

- **è‹±æ–‡å…¨ç§°ï¼š** NVIDIA System Management Interface
    
- **ä½œç”¨ï¼š** ç›‘æ§å¹¶ç®¡ç† NVIDIA GPU çš„çŠ¶æ€ã€‚
    
- **ç”¨æ³•ç¤ºä¾‹ï¼š**
    
    ```bash
    nvidia-smi
    ```
    
- **è¾“å‡ºå†…å®¹ï¼š**
    
    - GPU å‹å·ã€æ¸©åº¦ã€ä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨æƒ…å†µ
        
    - è¿è¡Œä¸­çš„è¿›ç¨‹ï¼ˆPIDã€å ç”¨ GPU å†…å­˜ï¼‰
        
- **ç”¨é€”ï¼š**
    
    - å¼€å‘è€…æˆ–ç®¡ç†å‘˜ç”¨æ¥è§‚å¯Ÿ GPU è¿è¡ŒçŠ¶å†µï¼Œå¸¸ç”¨äºæ’æŸ¥é—®é¢˜ã€‚
        
- **æ˜¯å¦å¿…é¡»ï¼š**
    
    - æ˜¯ï¼Œéš NVIDIA é©±åŠ¨è‡ªåŠ¨å®‰è£…ï¼Œæ˜¯æ£€æŸ¥é©±åŠ¨æ˜¯å¦æ­£ç¡®å®‰è£…çš„å…³é”®å·¥å…·ã€‚
        

---

## ğŸ§  6. **cuDNNï¼ˆCUDA Deep Neural Network Libraryï¼‰**

- **å…¨ç§°ï¼š** CUDA Deep Neural Network library
    
- **ä½œç”¨ï¼š** æ˜¯ NVIDIA ä¸“ä¸ºæ·±åº¦å­¦ä¹ æä¾›çš„ GPU åŠ é€Ÿåº“ã€‚
    
- **åŒ…å«å†…å®¹ï¼š**
    
    - ä¼˜åŒ–è¿‡çš„å·ç§¯ã€æ± åŒ–ã€å½’ä¸€åŒ–ç­‰æ“ä½œçš„ GPU å®ç°ã€‚
        
- **ç”¨é€”ï¼š**
    
    - è¢«æ·±åº¦å­¦ä¹ æ¡†æ¶å¦‚ TensorFlowã€PyTorch è‡ªåŠ¨è°ƒç”¨ï¼Œç”¨äºåŠ é€Ÿè®­ç»ƒå’Œæ¨ç†ã€‚
        
- **æ˜¯å¦å¿…é¡»ï¼š**
    
    - âœ… è®­ç»ƒ/éƒ¨ç½²æ·±åº¦ç¥ç»ç½‘ç»œæ—¶æ˜¯å¿…é¡»çš„ã€‚
        
- **æ³¨æ„äº‹é¡¹ï¼š**
    
    - éœ€è¦å’Œ CUDA Toolkitã€é©±åŠ¨ç‰ˆæœ¬å¯¹åº”ã€‚
        

---

## ğŸ§± 7. **NVIDIA é©±åŠ¨ï¼ˆNVIDIA Driverï¼‰**

- **ä½œç”¨ï¼š** æ˜¯æ“ä½œç³»ç»Ÿå’Œæ˜¾å¡ä¹‹é—´çš„é€šä¿¡æ¡¥æ¢ï¼Œä½¿ GPU å¯ä»¥æ‰§è¡Œ CUDA ç¨‹åºã€‚
    
- **ç”¨é€”ï¼š**
    
    - æä¾›å¯¹ GPU ç¡¬ä»¶çš„åº•å±‚è®¿é—®ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰ã€‚
        
- **å®‰è£…æ•ˆæœï¼š**
    
    - å®‰è£…é©±åŠ¨åï¼Œä½ çš„ç³»ç»Ÿæ‰â€œè¯†åˆ«â€å‡ºæ˜¾å¡ï¼Œå¹¶å¯è¿è¡Œ CUDA ç¨‹åºã€‚
        
- **æ˜¯å¦å¿…é¡»ï¼š**
    
    - âœ… ä¸€å®šå¿…é¡»ã€‚æ²¡æœ‰é©±åŠ¨ï¼Œä¸€åˆ‡ GPU è®¡ç®—éƒ½æ— æ³•ä½¿ç”¨ã€‚
        
- **æ³¨æ„äº‹é¡¹ï¼š**
    
    - é©±åŠ¨ç‰ˆæœ¬å¿…é¡»å…¼å®¹ä½ è¦ç”¨çš„ CUDA Toolkit å’Œ cuDNN ç‰ˆæœ¬ã€‚
        

---

## ğŸ“¦ 8. **libnvidia-container**

- **ä½œç”¨ï¼š** æ˜¯å®ç° NVIDIA GPU å®¹å™¨è¿è¡Œæ—¶çš„åº•å±‚åº“ã€‚
    
- **ç”¨é€”ï¼š**
    
    - ä¸º `nvidia-container-runtime` æä¾›åŠŸèƒ½æ”¯æŒï¼ŒæŒ‚è½½ GPUã€è®¾ç½®å®¹å™¨ç¯å¢ƒå˜é‡ã€é“¾æ¥åº“ç­‰ã€‚
        
- **æ˜¯å¦å•ç‹¬ä½¿ç”¨ï¼š**
    
    - ä¸€èˆ¬ä¸ç›´æ¥ä½¿ç”¨ï¼Œä½†æ˜¯å®¹å™¨ GPU æ”¯æŒçš„æ ¸å¿ƒç»„æˆã€‚
        
- **æ˜¯å¦å¿…é¡»ï¼š**
    
    - âœ… å¦‚æœä½¿ç”¨ NVIDIA å®¹å™¨ Runtimeï¼Œå°±å¿…é¡»ã€‚
        


---

## âœ… å¸¸è§é—®é¢˜è§£ç­”ï¼ˆFAQï¼‰

|é—®é¢˜|è§£ç­”|
|---|---|
|**æˆ‘åªæ˜¯è®­ç»ƒ PyTorch æ¨¡å‹ï¼Œéœ€è¦å®‰è£…å“ªäº›ï¼Ÿ**|NVIDIA é©±åŠ¨ã€CUDA Toolkitã€cuDNN|
|**åœ¨å®¹å™¨é‡Œè·‘ GPU ç¨‹åºæ€ä¹ˆåŠï¼Ÿ**|é™¤ä¸Šé¢ä¸‰è€…å¤–ï¼Œè¿˜éœ€ `nvidia-container-runtime` å’Œ `libnvidia-container`|
|**ä¸ºä»€ä¹ˆè£…äº† CUDAï¼Œä½† `nvidia-smi` æ— æ•ˆï¼Ÿ**|`nvidia-smi` ä¾èµ–çš„æ˜¯ **é©±åŠ¨**ï¼Œä¸æ˜¯ CUDA Toolkitï¼Œè¦å…ˆè£…é©±åŠ¨|
|**Toolkit å’Œé©±åŠ¨ä¸å…¼å®¹ä¼šæ€æ ·ï¼Ÿ**|ç¨‹åºæ— æ³•è°ƒç”¨ GPUï¼Œæˆ– CUDA åˆå§‹åŒ–å¤±è´¥ï¼ˆdevice not foundï¼‰|

---

å¦‚æœä½ æœ‰å¤šä¸ªç‰ˆæœ¬çš„ CUDA/é©±åŠ¨/å®¹å™¨ï¼Œè¿˜å¯ä»¥ä»‹ç»ï¼š

- **`cuda-version compatibility`**
    
- **å®¹å™¨ä¸­ä½¿ç”¨å¤šç‰ˆæœ¬ CUDA çš„æŠ€å·§**
    
- **å¦‚ä½•ä¼˜é›…åœ°å®‰è£…å¤šä¸ª CUDA**
    

æ˜¯å¦éœ€è¦è¿›ä¸€æ­¥äº†è§£ï¼Ÿå¯ä»¥ç»™æˆ‘ä½ çš„å®é™…ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘å¯ä»¥é’ˆå¯¹æ€§å¸®ä½ æ¢³ç†éœ€è¦çš„ç»„ä»¶ç»„åˆã€‚
# Qï¼šæ‰€ä»¥é©±åŠ¨æ‰æ˜¯cudaç¨‹åºçš„è¿è¡Œæ—¶å§ï¼Œå¦‚æœåªæ˜¯è¿è¡Œè€Œä¸æ˜¯å¼€å‘ï¼Œtoolkitä¸æ˜¯å¿…é¡»çš„å§
å®Œå…¨æ­£ç¡®ï¼ä½ çš„ç†è§£éå¸¸å‡†ç¡®ï¼Œä¸‹é¢æˆ‘æŠŠè¿™ä¸ªé€»è¾‘å†ç²¾ç‚¼æ€»ç»“ä¸€ä¸‹ï¼Œå¸®åŠ©ä½ ç‰¢å›ºæŒæ¡ï¼š

---

## âœ… CUDA ç¨‹åºè¿è¡Œçš„æœ¬è´¨éœ€æ±‚

|ç›®æ ‡|æ˜¯å¦éœ€è¦ CUDA Toolkit|æ˜¯å¦éœ€è¦ NVIDIA é©±åŠ¨|
|---|---|---|
|**è¿è¡Œ CUDA ç¨‹åº**ï¼ˆä¸å¼€å‘ï¼‰|âŒ ä¸éœ€è¦|âœ… **å¿…é¡»**ï¼ˆæ ¸å¿ƒè¿è¡Œæ—¶ï¼‰|
|**å¼€å‘ CUDA ç¨‹åº**|âœ… éœ€è¦ï¼ˆå«ç¼–è¯‘å™¨ã€å¤´æ–‡ä»¶ç­‰ï¼‰|âœ… å¿…é¡»|

---

## ğŸ”§ æ›´å…·ä½“è§£é‡Š

### âœ… NVIDIA é©±åŠ¨ï¼ˆå¿…é¡»ï¼‰ï¼š

- æ˜¯ CUDA ç¨‹åºçœŸæ­£è¿è¡Œæ‰€ä¾èµ–çš„ **åº•å±‚è¿è¡Œæ—¶ç¯å¢ƒ**ã€‚
    
- æä¾›ä¸ GPU é€šä¿¡çš„æ ¸å¿ƒåŠŸèƒ½ï¼ˆlibcuda.soï¼‰ã€‚
    
- ä¸¾ä¾‹æ¥è¯´ï¼š
    
    - `nvidia-smi` å°±æ˜¯é©±åŠ¨çš„ç»„æˆéƒ¨åˆ†ã€‚
        
    - `cuInit()` ç­‰ CUDA API æœ€ç»ˆéƒ½è°ƒç”¨é©±åŠ¨å‡½æ•°æ¥è°ƒåº¦ GPUã€‚
        

### âŒ CUDA Toolkitï¼ˆå¯é€‰ï¼Œè¿è¡Œæ—¶ä¸éœ€è¦ï¼‰ï¼š

- åŒ…å«å¼€å‘æ‰€éœ€çš„å·¥å…·å’Œåº“ï¼Œæ¯”å¦‚ï¼š
    
    - `nvcc` ç¼–è¯‘å™¨
        
    - `cuda_runtime.h` å¤´æ–‡ä»¶
        
    - `libcudart.so` è¿è¡Œæ—¶åŠ¨æ€åº“ï¼ˆå¼€å‘æ—¶é“¾æ¥ï¼‰
        

#### é‚£ä¸ºä»€ä¹ˆæœ‰æ—¶ä½ è¿è¡Œ CUDA ç¨‹åºè¿˜ä¼šæç¤ºç¼ºå°‘ Toolkit çš„åº“ï¼Ÿ

- å› ä¸ºæœ‰äº›ç¨‹åºä¼šä¾èµ– **åŠ¨æ€é“¾æ¥åº“**ï¼ˆå¦‚ `libcudart.so`ï¼‰â€”â€”
    
    - è‹¥ä½ è¿è¡Œçš„ç¨‹åºæ˜¯**åŠ¨æ€é“¾æ¥çš„å¯æ‰§è¡Œæ–‡ä»¶**ï¼Œé‚£ä¹ˆç³»ç»Ÿè¿è¡Œå®ƒæ—¶ä»ç„¶éœ€è¦æ‰¾è¿™äº›åº“ï¼ˆå“ªæ€•ä½ ä¸æ˜¯å¼€å‘è€…ï¼‰ã€‚
        
    - è¿™æ—¶å€™å¯ä»¥åªå®‰è£…å¯¹åº”çš„ **CUDA Runtime**ï¼ˆè€Œä¸æ˜¯æ•´ä¸ª Toolkitï¼‰ã€‚
        

---

## âœ… å®‰è£…è¿è¡Œç¯å¢ƒçš„å»ºè®®ï¼ˆä»…è¿è¡Œ CUDA ç¨‹åºï¼‰

- **æ¨èæ–¹å¼ä¸€ï¼š** å®‰è£… NVIDIA é©±åŠ¨ + `cuda-runtime` åŒ…ï¼ˆè½»é‡ï¼‰
    
- **æ¨èæ–¹å¼äºŒï¼š** ä½¿ç”¨å®˜æ–¹ `NVIDIA CUDA å®¹å™¨é•œåƒ`ï¼Œé•œåƒä¸­å·²å†…ç½®è¿è¡Œæ‰€éœ€çš„æœ€å°åº“
    

---

## ğŸ“¦ ç¤ºä¾‹ï¼šè¿è¡Œ CUDA ç¨‹åºçš„æœ€å°ä¾èµ–é¡¹ï¼ˆä»¥ Ubuntu ä¸ºä¾‹ï¼‰

```bash
sudo apt install nvidia-driver-535
sudo apt install cuda-runtime-12-2
```

è¿™æ ·å°±èƒ½è¿è¡Œç”¨ CUDA 12.2 ç¼–è¯‘çš„ç¨‹åºï¼Œè€Œä¸ç”¨å®‰è£…å®Œæ•´ Toolkitã€‚

---

å¦‚ä½ æœ‰å…´è¶£ï¼Œæˆ‘è¿˜å¯ä»¥ç»™ä½ æ¢³ç†ä¸€ä¸ªï¼š

- **éƒ¨ç½²å‹ç¯å¢ƒï¼ˆä»…è¿è¡Œï¼‰**
    
- **å¼€å‘å‹ç¯å¢ƒï¼ˆç¼–è¯‘ + è°ƒè¯•ï¼‰**
    
- **å®¹å™¨è¿è¡Œæ—¶ç¯å¢ƒï¼ˆå¦‚é•œåƒçš„æœ€å°ä¾èµ–ï¼‰**
    

çš„ä¸‰ç±»å®‰è£…æœ€å°é›†æ¸…å•ã€‚æ˜¯å¦éœ€è¦ç»§ç»­ï¼Ÿ
# Qï¼šNVIDIA Container Toolkitå’ŒNVIDIA Container Runtimeçš„åŒºåˆ«
è¿™æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§ä½†å®¹æ˜“æ··æ·†çš„é—®é¢˜ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ **æ¸…æ™°åœ°æ‹†è§£ NVIDIA Container Toolkit å’Œ NVIDIA Container Runtime çš„åŒºåˆ«ä¸è”ç³»**ï¼š

---

## ğŸ§± æ ¸å¿ƒç»“è®ºï¼ˆå…ˆè¯´é‡ç‚¹ï¼‰ï¼š

|é¡¹ç›®|æ¦‚å¿µåˆ†ç±»|åŠŸèƒ½ä½œç”¨|æ˜¯å¦å¿…é¡»|è°ä¾èµ–å®ƒ|
|---|---|---|---|---|
|**NVIDIA Container Toolkit**|å·¥å…·é›†åˆ|æ˜¯ä¸€ä¸ª**æ€»ç§°/ä¸Šå±‚é¡¹ç›®**ï¼ŒåŒ…æ‹¬äº† runtimeã€hookã€é…ç½®å·¥å…·ç­‰|âœ… æ˜¯å¯¹å¤–çš„ç»Ÿä¸€æ¥å£|å¼€å‘è€…ã€ç®¡ç†å‘˜|
|**NVIDIA Container Runtime**|ç»„ä»¶/æ’ä»¶|æ˜¯ toolkit ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œç”¨äºè®©å®¹å™¨è®¿é—® GPU|âœ… æ˜¯ toolkit çš„æ ¸å¿ƒ|è¢« Docker/K8s è°ƒç”¨|

> ğŸ“Œ **ä¸€å¥è¯åŒºåˆ«ï¼š**
> 
> - **Toolkit æ˜¯ä¸€å¥—å·¥å…·æ€»ç§°ï¼ŒåŒ…å« runtime ç­‰ç»„ä»¶**
>     
> - **Runtime æ˜¯ Toolkit ä¸­çš„ä¸€ä¸ªæ’ä»¶ï¼ŒçœŸæ­£è®©å®¹å™¨â€œèƒ½ç”¨ä¸Š GPUâ€**
>     

---

## ğŸ“¦ 1. NVIDIA Container Toolkit æ˜¯ä»€ä¹ˆï¼Ÿ

- **æ¦‚å¿µï¼š**
    
    - å®ƒæ˜¯ä¸€ä¸ª **å·¥å…·é›†**ï¼Œè®©ä½ å¯ä»¥åœ¨å®¹å™¨ï¼ˆDockerã€Kubernetesï¼‰ä¸­ä½¿ç”¨ GPUã€‚
        
- **ç»„æˆéƒ¨åˆ†ï¼š**
    
    - `nvidia-container-runtime`ï¼ˆGPU å®¹å™¨è¿è¡Œæ’ä»¶ï¼‰âœ… æ ¸å¿ƒ
        
    - `nvidia-container-toolkit`ï¼ˆé…ç½®è„šæœ¬/CLI å·¥å…·ï¼‰
        
    - `libnvidia-container`ï¼ˆåº•å±‚åº“ï¼‰
        
    - `nvidia-docker2`ï¼ˆå…¼å®¹æ—§æ¥å£ï¼‰
        
- **ä½œç”¨ï¼š**
    
    - å¸®ä½ é…ç½®å®¹å™¨è¿è¡Œç¯å¢ƒï¼Œä½¿å¾— GPU èƒ½æ— ç¼æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚
        
- **ä½ å’Œå®ƒçš„äº¤äº’ï¼š**
    
    - å®‰è£…åï¼Œä½ åªéœ€è¦è¿™æ ·è¿è¡Œå®¹å™¨å³å¯ï¼š
        
        ```bash
        docker run --gpus all nvidia/cuda:12.2-base nvidia-smi
        ```
        

---

## âš™ï¸ 2. NVIDIA Container Runtime æ˜¯ä»€ä¹ˆï¼Ÿ

- **æ¦‚å¿µï¼š**
    
    - æ˜¯ä¸€ä¸ªä¸º Docker/Kubernetes æä¾› GPU æ”¯æŒçš„è¿è¡Œæ—¶æ’ä»¶ã€‚
        
- **ä½ç½®ï¼š**
    
    - æ˜¯ Toolkit çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ã€‚
        
- **ä½œç”¨ï¼š**
    
    - æ›¿ä»£é»˜è®¤çš„ Docker runtimeï¼ˆå¦‚ runcï¼‰ï¼Œå®ç° GPU è®¾å¤‡æŒ‚è½½ã€ç¯å¢ƒæ³¨å…¥ã€‚
        
- **é…ç½®æ–¹å¼ï¼š**
    
    - ä¿®æ”¹ `/etc/docker/daemon.json` è®©å®ƒç”Ÿæ•ˆï¼š
        
        ```json
        {
          "default-runtime": "nvidia",
          "runtimes": {
            "nvidia": {
              "path": "nvidia-container-runtime",
              "runtimeArgs": []
            }
          }
        }
        ```
        

---

## ğŸ“Œ äºŒè€…å…³ç³»å›¾ï¼ˆç±»æ¯”ç†è§£ï¼‰

```
NVIDIA Container Toolkitï¼ˆå·¥å…·æ€»ç§°ï¼‰
â”‚
â”œâ”€â”€ nvidia-container-runtime   â† çœŸæ­£åšæŒ‚è½½ GPU çš„æ’ä»¶
â”œâ”€â”€ nvidia-container-toolkit   â† é…ç½®å·¥å…·å’Œ CLI è„šæœ¬
â””â”€â”€ libnvidia-container        â† åº•å±‚åº“
```

---

## âœ… å®‰è£…å»ºè®®

- **å¸¸è§å®‰è£…å‘½ä»¤ï¼š**
    
    ```bash
    sudo apt install nvidia-container-toolkit
    ```
    
- è¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨æ‹‰å–å¹¶é…ç½®å¥½ï¼š
    
    - `nvidia-container-runtime`
        
    - `libnvidia-container`
        
    - é…ç½® `/etc/docker/daemon.json`
        

---

## ğŸ”š æ€»ç»“ä¸€å¥è¯ï¼š

> **Toolkit æ˜¯ä¸€æ•´å¥—å·¥å…·çš„é›†åˆï¼›Runtime æ˜¯ Toolkit ä¸­æœ€æ ¸å¿ƒã€ä¹Ÿæœ€å®é™…æ‰§è¡Œå·¥ä½œçš„éƒ¨åˆ†ï¼Œå®ƒè®©å®¹å™¨çœŸçš„èƒ½â€œçœ‹åˆ°â€ GPUã€‚**

---

æ˜¯å¦è¿˜éœ€è¦æˆ‘å¸®ä½ å†™ä¸€ä¸ªæ£€æµ‹ Toolkit å®‰è£…æ˜¯å¦æˆåŠŸçš„è„šæœ¬ï¼Œæˆ–è€…ä»‹ç»å®ƒåœ¨ Kubernetes ä¸­çš„ç”¨æ³•ï¼Ÿ
# Qï¼šåªå®‰è£…NVIDIA Container Runtimeèƒ½æ­£å¸¸è¿è¡Œå—
ä¸å¯ä»¥ï¼Œä»…å®‰è£… **NVIDIA Container Runtime** é€šå¸¸**æ— æ³•å•ç‹¬æ­£å¸¸è¿è¡Œ GPU å®¹å™¨**ã€‚ä¸‹é¢æˆ‘ç»™å‡ºè¯¦ç»†åŸå› ä¸æ­£ç¡®åšæ³•ã€‚

---

## âŒ ä¸ºä»€ä¹ˆ **ä»…å®‰è£… `nvidia-container-runtime`** ä¸å¤Ÿï¼Ÿ

`nvidia-container-runtime` æ˜¯è®©å®¹å™¨â€œä½¿ç”¨ GPUâ€çš„**æ’ä»¶å±‚**ï¼Œä½†å®ƒä¾èµ–å¾ˆå¤šâ€œå¹•åç»„ä»¶â€å’Œâ€œé…ç½®å·¥å…·â€æ¥å®ŒæˆæŒ‚è½½ã€ç¯å¢ƒå˜é‡æ³¨å…¥ã€ç‰ˆæœ¬ç®¡ç†ç­‰å·¥ä½œï¼š

|ç¼ºå¤±çš„éƒ¨åˆ†|è¯´æ˜|
|---|---|
|âœ… `libnvidia-container`|æä¾›å®é™…çš„åº“æŒ‚è½½ä¸æƒé™æ§åˆ¶é€»è¾‘ï¼Œruntime ä¾èµ–å®ƒ|
|âœ… `nvidia-container-cli`|Runtime ä¼šè°ƒç”¨å®ƒæ¥æ‰§è¡ŒæŒ‚è½½æ“ä½œ|
|âœ… é…ç½®æ–‡ä»¶ç”Ÿæˆå·¥å…·ï¼ˆå¦‚ `nvidia-ctk`ï¼‰|è‡ªåŠ¨ç”Ÿæˆ `/etc/docker/daemon.json` ç­‰é…ç½®|
|âŒ ä½ æ— æ³•ç›´æ¥ç”¨ `docker run --gpus all`|Docker ä¸è®¤è¯†ä½ çš„ runtimeï¼Œæ²¡æœ‰é…ç½® runtime hook|

---

## âœ… æ­£ç¡®åšæ³•ï¼šå®‰è£… NVIDIA Container Toolkitï¼ˆæ¨èï¼‰

Toolkit æ˜¯å®˜æ–¹æ¨èçš„â€œæ•´å¥—ç¯å¢ƒâ€ï¼Œå®ƒ**è‡ªåŠ¨å®‰è£… runtime + æ‰€éœ€ä¾èµ–**ï¼Œå¹¶å¸®ä½ é…ç½® Dockerã€‚

### ğŸ”§ å®‰è£…å‘½ä»¤ï¼ˆä»¥ Ubuntu ä¸ºä¾‹ï¼‰ï¼š

```bash
# æ·»åŠ å®˜æ–¹æºï¼ˆè‹¥æœªæ·»åŠ ï¼‰
distribution=$(. /etc/os-release;echo $ID$VERSION_ID)
curl -s -L https://nvidia.github.io/libnvidia-container/gpgkey | sudo apt-key add -
curl -s -L https://nvidia.github.io/libnvidia-container/$distribution/libnvidia-container.list | sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list

# å®‰è£… Container Toolkitï¼ˆå« Runtimeï¼‰
sudo apt update
sudo apt install -y nvidia-container-toolkit

# é‡å¯ Docker
sudo systemctl restart docker
```

ä¹‹åä½ å°±å¯ä»¥è¿è¡Œï¼š

```bash
docker run --gpus all nvidia/cuda:12.2-base nvidia-smi
```

---

## ğŸ“¦ å¦‚æœä½ **å¼ºè¡Œåªè£… runtime**ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

- Docker æ— æ³•è¯†åˆ« `nvidia` runtimeï¼ˆæ²¡æœ‰é…ç½® `daemon.json`ï¼‰
    
- ç¼ºå¤± CLI å·¥å…·ï¼šæ— æ³•è§£æ `--gpus` å‚æ•°
    
- å®¹å™¨å¯åŠ¨å¤±è´¥ï¼ŒæŠ¥é”™å¦‚ï¼š
    
    - `Error response from daemon: Unknown runtime specified nvidia`
        
    - `nvidia-container-cli: initialization error:...`
        

---

## âœ… æ€»ç»“ï¼š

|é—®é¢˜|ç­”æ¡ˆ|
|---|---|
|**åªè£… `nvidia-container-runtime` èƒ½ç”¨å—ï¼Ÿ**|âŒ ä¸æ¨èï¼Œæ— æ³•ç‹¬ç«‹è¿è¡Œï¼Œç¼ºå°‘ä¾èµ–å’Œé…ç½®|
|**æ­£ç¡®æ–¹å¼æ˜¯ï¼Ÿ**|âœ… å®‰è£…å®Œæ•´çš„ `nvidia-container-toolkit`ï¼Œå®ƒåŒ…å« runtime å’Œæ‰€æœ‰ä¾èµ–|

---

å¦‚ä½ å¸Œæœ›éƒ¨ç½²æç®€çš„ GPU å®¹å™¨è¿è¡Œç¯å¢ƒï¼ˆå¦‚åµŒå…¥å¼ã€é•œåƒå®šåˆ¶ï¼‰ï¼Œæˆ‘ä¹Ÿå¯ä»¥æ•™ä½ **æ‰‹åŠ¨åªéƒ¨ç½² runtime + æ‰€éœ€ä¾èµ–**çš„æ–¹æ¡ˆã€‚æ˜¯å¦éœ€è¦ï¼Ÿ